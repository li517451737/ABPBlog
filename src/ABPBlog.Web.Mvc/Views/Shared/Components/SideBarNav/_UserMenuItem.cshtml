@using Abp.Collections.Extensions
@using ABPBlog.Web.Views.Shared.Components.SideBarNav
@model UserMenuItemViewModel

<li class="@(Model.MenuItemIndex == 0 && Model.RootLevel ? "start" : "") @(Model.MenuItem.IsMenuActive(Model.CurrentPageName) ? "active" : "")">
    @if (Model.MenuItem.Items.IsNullOrEmpty())
            {
        <a href="@Model.MenuItem.CalculateUrl(ApplicationPath)">
            <i class="material-icons">@Model.MenuItem.Icon</i>
            <span>@Model.MenuItem.DisplayName</span>
        </a>
    }
    else
    {
        <a href="javascript:void(0);" class="menu-toggle">
            <i class="material-icons">@Model.MenuItem.Icon</i>
            <span>@Model.MenuItem.DisplayName</span>
        </a>
        <ul class="ml-menu">
            @for (var i = 0; i < Model.MenuItem.Items.Count; i++)
            {
                var childMenuItem = Model.MenuItem.Items[i];
                if (!childMenuItem.IsVisible)
                {
                    continue;
                }
                @Html.Partial("Components/SideBarNav/_UserMenuItem", new UserMenuItemViewModel
                {
                    MenuItem = childMenuItem,
                    MenuItemIndex = i,
                    CurrentPageName = Model.CurrentPageName,
                    RootLevel = false
                })
            }
        </ul>
    }
</li>
    